@model IEnumerable<SiriusApplication.Models.Image>

@{ int imageShowcaseIncrement = 0; }

<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>

<script type="text/javascript">
    // This code tells the browser to execute the "Initialize" method only when the complete document model has been loaded
    $(document).ready(function () {
        Initialize();
    });

    $('#barry0').click(function () {
        Initialize();
    });

    $('#barry1').click(function () {
        Initialize();
    });

    $('#barry2').click(function () {
        Initialize();
    });

    // Where all the fun happens 
    function Initialize() {

        alert("Initialize Called.");

        // Google has tweaked their interface somewhat - this tells the api to use that new UI
        window.google.maps.visualRefresh = true;
        var Liverpool = new window.google.maps.LatLng(53.408841, -2.981397);

        // These are options that set initial zoom level, where the map is centered globally to start, and the type of map to show
        var mapOptions = {
            zoom: 14,
            center: Liverpool,
            mapTypeId: window.google.maps.MapTypeId.G_NORMAL_MAP
        };

        // This makes the div with id "map_canvas" a google map
        var map0 = new window.google.maps.Map(document.getElementById('map_canvas0'), mapOptions);

        var map1 = new window.google.maps.Map(document.getElementById('map_canvas1'), mapOptions);

        var map2 = new window.google.maps.Map(document.getElementById('map_canvas2'), mapOptions);
    }

</script>




<div class="container marketing">
    <hr class="featurette-divider" />
    <h2 class="featurette-heading">Latest Photos</h2>
    
    <div class="pull-right">
        <br/>
        <button id="barry0" type="button" class="btn btn-danger">barry0</button>
    </div>
    <div class="pull-right">
        <br/>
        <button id="barry1" type="button" class="btn btn-danger">barry1</button>
    </div>
    <div class="pull-right">
        <br/>
        <button id="barry2" type="button" class="btn btn-danger">barry2</button>
    </div>

    @if (!this.Model.Any())
    {
        <div class="col-lg-4 text-center">
            There are currently no Images to display.
        </div>
    }
    else
    {
        foreach (var image in Model)
        {
        <div class="row">
            <div class="col-md-7">
                <h2 class="featurette-heading">@image.Title</h2>
                <p class="lead">@image.Description</p>
                <div class="panel-group" id="accordion">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseDetails@(imageShowcaseIncrement)">Details
                                        <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapseDetails@(imageShowcaseIncrement)" class="panel-collapse collapse">
                            <div class="panel-body">
                                @Html.LabelFor(model => model.FirstOrDefault().ImageTakenOnDate)
                                <p>@image.ImageTakenOnDate</p>
                                @Html.LabelFor(model => model.FirstOrDefault().Aperture)
                                <p>@image.Aperture</p>
                                @Html.LabelFor(model => model.FirstOrDefault().IsoRating)
                                <p>@image.IsoRating</p>
                                @Html.LabelFor(model => model.FirstOrDefault().FocalLength)
                                <p>@image.FocalLength</p>
                                @Html.LabelFor(model => model.FirstOrDefault().ShutterSpeed)
                                <p>@image.ShutterSpeed</p>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseLocation@(imageShowcaseIncrement)">Location<span class="glyphicon glyphicon-chevron-right pull-right"></span></a>
                            </h4>
                        </div>
                        <div id="collapseLocation@(imageShowcaseIncrement)" class="panel-collapse collapse">
                            <div class="panel-body">
                                @Html.Action("_GoogleMaps", "Photography", new { id = image.ImageId, count = imageShowcaseIncrement})
                            </div>
                        </div>
                    </div>
                    <div class="pull-right">
                        <br/>
                        @Html.ActionLink("View image", "DisplayImageById", new {id = image.ImageId}, new {@class="btn btn-primary"})
                    </div>
                </div>
            </div>
            <div class="col-md-5">
                <img class="img-responsive thumbnail" width=500 height=500  alt="@image.Description" src="@this.Url.Action("DisplayImageFileById", "Photography", new { id = image.ImageId })"/>
            </div>
        </div>
        <hr class="featurette-divider" />

            //increment for next collapse div
            imageShowcaseIncrement++;
        }
    }
</div>
